<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Design System - Navigation Drawer</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;400;500;600;700;900&display=swap" rel="stylesheet">

    <!-- Tokens CSS -->
    <link rel="stylesheet" href="../_tokens.css">

    <!-- Navigation Drawer Styles -->
    <link rel="stylesheet" href="navigation-drawer.css">

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>
    <aside class="left-nav">
        <!-- Header -->
        <div class="nav-header">
            <div class="nav-header-content">
                <h1 class="nav-title">Design System</h1>
                <button class="theme-toggle-btn" aria-label="Toggle theme">
                    <i data-lucide="sun" class="theme-icon-light"></i>
                    <i data-lucide="moon" class="theme-icon-dark"></i>
                </button>
            </div>
        </div>

        <!-- Main Menu Toggle -->
        <div class="collapse-toggle" role="button" tabindex="0" aria-expanded="true">
            <span class="menu-text">Main Menu</span>
            <span class="chevron-container">
                <i data-lucide="chevron-left"></i>
            </span>
        </div>

        <!-- Search -->
        <div class="search-container">
            <i data-lucide="search" class="search-icon"></i>
            <input type="text" class="search-input" placeholder="Search...">
        </div>

        <!-- Navigation Menu -->
        <nav class="nav-menu">
            <!-- Simple Links -->
            <a href="#" class="nav-item" title="Introduction">
                <i data-lucide="file-text" class="nav-icon"></i>
                <span class="nav-label">Introduction</span>
            </a>

            <a href="#" class="nav-item" title="Quick Start Guide">
                <i data-lucide="book-open" class="nav-icon"></i>
                <span class="nav-label">Quick Start Guide</span>
            </a>

            <a href="#" class="nav-item" title="Implementation Planner">
                <i data-lucide="rocket" class="nav-icon"></i>
                <span class="nav-label">Implementation Planner</span>
            </a>

            <a href="#" class="nav-item" title="Accessibility">
                <i data-lucide="accessibility" class="nav-icon"></i>
                <span class="nav-label">Accessibility</span>
            </a>

            <a href="#" class="nav-item" title="Design Philosophy">
                <i data-lucide="lightbulb" class="nav-icon"></i>
                <span class="nav-label">Design Philosophy</span>
            </a>

            <a href="#" class="nav-item" title="For Designers">
                <i data-lucide="pen-tool" class="nav-icon"></i>
                <span class="nav-label">For Designers</span>
            </a>

            <a href="#" class="nav-item" title="Accessible Palettes">
                <i data-lucide="palette" class="nav-icon"></i>
                <span class="nav-label">Accessible Palettes</span>
            </a>

            <!-- Expandable Section - Foundation -->
            <div class="nav-section">
                <button class="nav-item nav-parent" aria-expanded="false" title="Foundation">
                    <i data-lucide="more-horizontal" class="nav-icon"></i>
                    <span class="nav-label">Foundation</span>
                    <i data-lucide="chevron-down" class="expand-icon"></i>
                </button>
                <div class="nav-submenu">
                    <a href="#" class="nav-item nav-child" title="Colors">Colors</a>
                    <a href="#" class="nav-item nav-child" title="Typography">Typography</a>
                    <a href="#" class="nav-item nav-child" title="Spacing">Spacing</a>
                    <a href="#" class="nav-item nav-child" title="Elevation">Elevation</a>
                </div>
            </div>

            <!-- Expandable Section - Components -->
            <div class="nav-section">
                <button class="nav-item nav-parent" aria-expanded="false" title="Components">
                    <i data-lucide="layout-grid" class="nav-icon"></i>
                    <span class="nav-label">Components</span>
                    <i data-lucide="chevron-down" class="expand-icon"></i>
                </button>
                <div class="nav-submenu">
                    <a href="#" class="nav-item nav-child" title="Buttons">Buttons</a>
                    <a href="#" class="nav-item nav-child" title="Input Fields">Input Fields</a>
                    <a href="#" class="nav-item nav-child" title="Cards">Cards</a>
                    <a href="#" class="nav-item nav-child" title="Navigation">Navigation</a>
                    <a href="#" class="nav-item nav-child" title="Modals">Modals</a>
                </div>
            </div>
        </nav>
    </aside>

    <script>
        // Theme switching functionality
        const themeToggleBtn = document.querySelector('.theme-toggle-btn');
        const htmlElement = document.documentElement;

        // Check for saved theme preference or default to light mode
        const currentTheme = localStorage.getItem('theme') || 'light';
        htmlElement.setAttribute('data-theme', currentTheme);

        // Theme toggle handler
        themeToggleBtn.addEventListener('click', () => {
            const currentTheme = htmlElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';

            htmlElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);

            // Re-initialize icons for smooth transition
            lucide.createIcons();
        });

        // Initialize Lucide icons
        lucide.createIcons();

        // Get all nav items and parent buttons
        const allNavItems = document.querySelectorAll('.nav-item:not(.nav-parent)');
        const allParents = document.querySelectorAll('.nav-parent');
        const navSections = document.querySelectorAll('.nav-section');

        // Navigation elements
        const collapseToggle = document.querySelector('.collapse-toggle');
        const leftNav = document.querySelector('.left-nav');

        // Collapse toggle functionality
        collapseToggle.addEventListener('click', () => {
            leftNav.classList.toggle('collapsed');
            const isCollapsed = leftNav.classList.contains('collapsed');
            collapseToggle.setAttribute('aria-expanded', !isCollapsed);

            // Rotate chevron icon
            const icon = collapseToggle.querySelector('[data-lucide]');
            icon.setAttribute('data-lucide', isCollapsed ? 'chevron-right' : 'chevron-left');
            lucide.createIcons();
        });

        // Function to remove all active states
        function removeAllActiveStates() {
            allNavItems.forEach(item => item.classList.remove('active'));
            allParents.forEach(parent => parent.classList.remove('active'));
        }

        // Expandable sections functionality
        navSections.forEach(section => {
            const parent = section.querySelector('.nav-parent');

            parent.addEventListener('click', () => {
                const isExpanded = section.classList.contains('expanded');
                const wasActive = parent.classList.contains('active');

                // Remove all active states first
                removeAllActiveStates();

                // Toggle expanded state
                section.classList.toggle('expanded');
                parent.setAttribute('aria-expanded', !isExpanded);

                // If expanding, make parent active
                if (!isExpanded) {
                    parent.classList.add('active');
                }

                // Re-initialize icons after changing the chevron
                lucide.createIcons();
            });
        });

        // Active state functionality for all nav items (excluding parent buttons)
        allNavItems.forEach(item => {
            item.addEventListener('click', () => {
                // Remove all active states (including parent active states)
                removeAllActiveStates();

                // Add active class to clicked item
                item.classList.add('active');
            });
        });
    </script>
</body>
</html>
